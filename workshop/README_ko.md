## GitHub Copilot로 레거시 프로젝트 업그레이드하기

레거시(구식) Python 애플리케이션을 최신 Python 버전으로 업그레이드하는 과정을 GitHub Copilot의 도움을 받아 진행해 봅시다.

> [!NOTE]
> 이 저장소는 **GitHub Copilot**의 다양한 기능(예: **Copilot Chat** 및 **인라인 채팅**)을 소개하기 위한 것입니다. 따라서 아래 단계별 가이드에는 수행해야 할 작업에 대한 일반적인 설명이 포함되어 있으며, Copilot Chat 또는 인라인 채팅이 필요한 명령을 생성하는 데 도움을 줄 수 있습니다.
>
> 각 단계(적용 가능한 경우)에는 Copilot 제안을 올바른 명령과 비교할 수 있는 `Cheatsheet`도 포함되어 있습니다.
>
> 💡 다양한 프롬프트를 시도해 보고 GitHub Copilot 제안의 정확성에 어떤 영향을 미치는지 확인하세요. 예를 들어, 인라인 채팅을 사용할 때 추가 프롬프트를 사용하여 전체 프롬프트를 다시 작성하지 않고 응답을 세부 조정할 수 있습니다.

## 워크숍 기능

이 워크숍에서는 Python 2.5 버전을 사용한 레거시 Python 애플리케이션을 다룹니다. 주요 기능은 다음과 같습니다:

1. 모든 종속성이 미리 설치되어 있지만, 구식 Python 버전을 사용하는 레거시 애플리케이션은 아닙니다.
2. 애플리케이션은 Sqlite3과 구식 Python 구문을 사용하며, 이를 업데이트할 수 있습니다.
3. 레거시 애플리케이션에는 기능 테스트에 사용할 수 있는 문서가 포함되어 있습니다.
4. 레거시 코드의 일부로 단위 및 기능 테스트가 제공됩니다.


### 1. 에이전트를 사용하여 프로젝트 탐색

`@workspace` 에이전트를 사용하여 이 프로젝트에서 무슨 일이 일어나고 있는지 설명하세요.

- GitHub Copilot Chat을 열고 프롬프트에 `@workspace`를 접두사로 추가하세요.
- 이 프로젝트가 종속성을 설치하는 방법과 같은 질문을 하세요.

### 2. 레거시 및 포팅 문제 확인

Python 애플리케이션에서 테스트를 실행해 보세요. 사전 설치된 `pytest`를 사용하여 출력을 확인하세요. 어떤 일이 발생하나요?

- `@workspace 이 코드를 최신 Python으로 포팅할 때 발생할 수 있는 문제는 무엇인가요?`와 같은 질문을 하세요.
- 가상 환경을 사용하여 종속성을 설치해 보세요.

> [!NOTE]
> 왜 작동하지 않을까요? 종속성은 아마도 `distribute`라는 더 이상 지원되지 않는 레거시 Python을 사용하기 때문에 설치에 실패할 것입니다.
> Copilot을 사용하여 종속성을 설치하는 다른 방법을 제안받으세요.


### 3. 모든 코드를 업그레이드된 디렉터리로 복사

코드를 포팅하려면 모든 코드를 `upgraded` 디렉터리로 복사해야 합니다. 여기에서 코드를 작업하게 됩니다.

- 기능 테스트를 사용하여 집중할 기능의 _슬라이스_를 결정하세요.
- 
> [!NOTE]
> 왜 올바른 설명을 제공하지 않을까요? 비즈니스 로직이 LLM에 명확하지 않은 일부 구성 요소를 포함할 수 있기 때문입니다.


### 4. 프로젝트 설치

가상 환경을 생성하고 프로젝트를 설치하세요. `python setup.py develop`을 실행하고 오류가 무엇인지 이해해 보세요.

- GitHub Copilot 채팅을 사용하여 오류를 붙여넣고 무슨 일이 일어나고 있는지 안내를 받으세요.
- 파일을 컨텍스트로 추가하세요 `#file:setup.py`
- 제안을 사용하여 오류를 수정하고 설치를 완료하세요.


### 5. 테스트 실행

프로젝트에는 `pytest` 프레임워크와 명령줄 도구가 설치되어 있습니다. 사용 가능한 단위 테스트를 실행하고 오류를 탐색해 보세요.

- 오류 출력을 사용하여 Copilot에 도움을 요청하세요. `#terminalSelection`과 함께 채팅에 포함하세요. 출력이 선택되었는지 확인하세요.
- Copilot의 응답을 검토하고 필요한 경우 추가 설명을 요청하세요.
- 아직 코드를 편집하지 마세요.


> [!NOTE]
> 오류가 즉시 이해되지 않거나 Python 버전이 오래되었다는 것을 나타낼 수 있습니다. 오류를 더 잘 이해하고 전략을 선택하려면 추가 질문을 하세요. 프로젝트에 사용된 Python 버전이 오래되었다고 힌트를 줄 수도 있습니다.

### 6. try/except 오류 수정

기능 테스트를 사용하여 집중할 기능의 _슬라이스_를 결정하세요. 이 경우 try/except 오류를 수정합니다.

- GitHub Copilot을 사용하여 실제 문제를 해결하세요. 이전 Python 버전을 언급하세요.
- 모든 try/except 오류를 수정하고 이러한 오류가 수정될 때까지 테스트를 계속 실행하세요.

> [!NOTE]
> 예외 외에도 다른 오류가 있습니다. 모든 try/except가 깨끗하고 수정되었는지 확인한 후 다음 단계로 진행하세요.


### 7. ConfigParser 문제 수정

다음 문제는 `ConfigParser`가 사용 가능하지 않다는 것입니다. GitHub Copilot을 사용하여 수정 전략을 제공받으세요.

- _"이 프로젝트는 Python 2.5로 작성되었으며 Python 3.9에서 다음과 같은 문제가 발생합니다:"_ 라고 질문하세요. 테스트 출력의 일부를 포함하세요.
- 수정이 간단할 수 있습니다. 구현할 옵션을 선택하고 즉시 확인하세요.
- 테스트를 실행하여 변경 사항이 올바른지 확인하고 테스트가 통과하는지 확인하세요.

[!NOTE]
> 이제 모든 테스트가 통과해야 합니다. 그렇지 않은 경우 테스트 출력을 사용하여 Copilot에 도움을 요청하고 이 워크숍의 이전 단계를 모두 검토하세요.


### 8. 테스트를 Pytest로 포팅

Pytest는 Python에서 가장 일반적이고 강력한 테스트 프레임워크 및 명령줄 도구입니다. 레거시 코드는 `unittest`를 사용하며, 이는 `pytest`만큼 강력하고 유연하지 않습니다. 모든 테스트를 `pytest`로 포팅하고 실행하세요.

- 테스트 파일에서 `@workspace` 에이전트를 사용하여 테스트를 `pytest`로 포팅하는 방법을 물어보세요.
- 단일 테스트를 작성하고 가능하면 클래스 대신 테스트 함수를 사용해 보세요.
- 테스트를 작성한 후 GitHub Copilot을 사용하여 다음 테스트를 생성하도록 제안받으세요.

> [!NOTE]
> 테스트는 `pytest`가 유연하기 때문에 `unittest` 테스트를 실행할 수 있지만, 테스트를 `pytest`로 포팅하는 것이 더 강력하고 유연합니다. 이는 향후 새 테스트를 추가하거나 기존 테스트를 수정해야 할 때도 도움이 됩니다.

### 9. 최신 패키징 사용

레거시 코드는 여전히 `setup.py`와 함께 사용 중인 `setuptools`를 사용합니다. 이는 이제 더 이상 사용되지 않으며 `pyproject.toml`을 사용하여 프로젝트를 패키징하세요.

- Copilot에 `pyproject.toml` 파일을 만드는 방법을 물어보세요. `@workspace` 에이전트를 사용하여 질문하세요. `setup.py` 파일을 열어 컨텍스트로 사용할 수 있도록 하세요.
- 새 `pyproject.toml` 파일을 생성하고 Copilot 제안을 사용하여 내용을 채우세요.
- `pyproject.toml` 파일을 사용하여 프로젝트를 설치하세요. `pip install .`을 사용하여 프로젝트를 편집 가능한 모드로 설치할 수 있습니다.


> [!NOTE]
> Python 패키징은 여전히 어려운 주제입니다. `pyproject.toml` 파일은 Python 프로젝트를 패키징하는 새로운 표준이지만, 아직 널리 채택되지 않았습니다. GitHub Copilot을 사용하여 `pyproject.toml` 파일을 도울 수 있지만 항상 정확하지 않을 수 있습니다. 파일 내용을 확인하고 설치를 테스트하세요.

### 10. GitHub Actions로 자동화

레거시 프로젝트에는 자동화가 없었습니다. GitHub Actions를 사용하여 프로젝트의 테스트 및 유효성을 자동화하세요. 목표는 모든 풀 리퀘스트에서 실행되고 테스트를 실행하며 프로젝트를 설치하려고 시도하는 워크플로를 갖는 것입니다.

- `@workspace` 에이전트를 사용하여 GitHub Actions 워크플로를 만드는 방법을 Copilot에 물어보세요.
- GitHub Actions 워크플로를 생성하기 위해 필요한 파일 및 디렉터리를 생성하세요.
- 완료되면 변경 사항을 푸시하여 GitHub Actions가 작동하는지 확인하세요.

> [!NOTE]
> 자동화 구축은 현대 소프트웨어 개발의 핵심 부분이지만, 모든 것을 완벽하게 만드는 데 시간이 걸릴 수 있습니다.
> 자동화를 생성하는 동안 인내심을 가지고 진행 상황에 따라 오류 및 문제를 해결하는 데 GitHub Copilot을 사용하세요.
